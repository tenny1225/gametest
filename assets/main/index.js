System.register("chunks:///_virtual/Background.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var e,t,n,o,i,c,u,a,l;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,n=r.initializerDefineProperty,o=r.assertThisInitialized},function(r){i=r.cclegacy,c=r._decorator,u=r.UITransform,a=r.Graphics,l=r.Component}],execute:function(){var s,f,p,d,h,g,y,b,m;i._RF.push({},"50884Dle2ZIoKMRQlryoFNU","Background",void 0);var z=c.ccclass,v=c.property;r("Background",(s=z("Background"),f=v(String),p=v(Boolean),d=v(Number),s((y=e((g=function(r){function e(){for(var e,t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];return e=r.call.apply(r,[this].concat(i))||this,n(e,"color",y,o(e)),n(e,"isRound",b,o(e)),n(e,"roundSize",m,o(e)),e}t(e,r);var i=e.prototype;return i.start=function(){var r=this.getComponent(u),e=r.contentSize.width,t=r.contentSize.height,n=this.addComponent(a);n.fillColor.fromHEX(this.color),this.isRound?(n.roundRect(-e/2,-t/2,e,t,this.roundSize),n.fill()):n.fillRect(-e/2,-t/2,e,t)},i.update=function(r){},e}(l)).prototype,"color",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"#ffffff"}}),b=e(g.prototype,"isRound",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=e(g.prototype,"roundSize",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),h=g))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/DataItem.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t({PropType:void 0,SpriteDirction:void 0}),e._RF.push({},"0eae8E+UQJEG7GSeyaTssE8","DataItem",void 0);var i,o;t("GrassItem",(function(){this.bg=void 0,this.prop=void 0,this.locked=void 0,this.direction=void 0,this.link_pos=void 0}));!function(t){t.Left="l",t.Top="t",t.Right="r",t.Bottom="b"}(i||(i=t("SpriteDirction",{}))),function(t){t.Blank="blank",t.Grass="grass",t.Stone="stone",t.Fire="fire",t.Wind="wind",t.Sprite="sprite",t.Hole_Switch_On="swicth_on",t.Hole_Switch_Off="swicth_off",t.Hole_on="hole_on",t.Hole_off="hole_off",t.Radish="radish",t.Enemy="enemy",t.Fence_Left_Bottom="l_b",t.Fence_Right_Bottom="r_b",t.Fence_Left_Top="l_t",t.Fence_Right_Top="r_t"}(o||(o=t("PropType",{})));var n=t("Config",(function(){}));n.Grass_size=600/4.5,n.Lock_size=20,n.Sprite_size=60,e._RF.pop()}}}));

System.register("chunks:///_virtual/DialogManger.ts",["cc"],(function(t){"use strict";var e,n,i,o,a,r,s,l,c;return{setters:[function(t){e=t.cclegacy,n=t.UIOpacity,i=t.tween,o=t.v3,a=t.UITransform,r=t.instantiate,s=t.Label,l=t.NodeEventType,c=t.ParticleSystem2D}],execute:function(){e._RF.push({},"9a4bdZLYrdDrLPrNF4WFZaK","DialogManger",void 0);t("DialogManger",function(){function t(){this.parent=void 0,this.prefab=void 0,this.dialog=void 0,this.listener=void 0}t.create=function(e,n){var i=new t;return i.parent=e,i.prefab=n,i};var e=t.prototype;return e.onClosed=function(t){return this.listener=t,this},e.close=function(){var t=this,e=this.dialog.getChildByPath("content"),a=this.dialog.getComponent(n);return i(a).to(.2,{opacity:0},{onComplete:function(){t.dialog.removeFromParent(),t.parent=null,t.prefab=null,t.listener&&t.listener()}}).start().removeSelf(),i(e).to(.2,{scale:o(.3,.3,1)}).start().removeSelf(),this},e.show=function(t){var e=this,h=this.parent.getComponent(a);this.dialog=r(this.prefab),this.dialog.getComponent(a).setContentSize(h.contentSize);var g=this.dialog.getChildByPath("content"),d=g.getChildByPath("title").getComponent(s);d.string=t?"恭喜过关":"闯关失败",g.getChildByPath("restart").on(l.TOUCH_END,(function(){e.close()}));var p=this.dialog.addComponent(n);return p.opacity=0,this.dialog.parent=this.parent,i(p).to(.2,{opacity:255}).start().removeSelf(),i(g).set({scale:o(.1,.1,1)}).to(.3,{scale:o(1,1,1)},{easing:"smooth"}).delay(.2).call((function(){var n=e.dialog.getChildByPath("p2d").getComponent(c);t&&n.resetSystem()})).start().removeSelf(),this},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Grassland.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataItem.ts","./MyGame.ts"],(function(e){"use strict";var t,o,i,s,n,r,a,p,c,d,h,l,g,f,u,m,v,C,z,_;return{setters:[function(e){t=e.inheritsLoose,o=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,s=e._decorator,n=e.Layers,r=e.v3,a=e.UITransform,p=e.UIOpacity,c=e.Size,d=e.v2,h=e.Sprite,l=e.Node,g=e.Graphics,f=e.NodeEventType,u=e.Rect,m=e.tween,v=e.Component},function(t){C=t.PropType,z=t.Config,e("PropType",t.PropType)},function(e){_=e.MyGame}],execute:function(){var w;i._RF.push({},"fe1e47CB0JBZbl83va1MzMs","Grassland",void 0);var S=s.ccclass;s.property,e("Grassland",S("Grassland")(w=function(e){function i(){for(var t,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))||this).grassItem=void 0,t.prop=void 0,t.isLock=void 0,t.isBlank=void 0,t.size=void 0,t.spriteMoveCentered=new Map,t.stage=void 0,t.isOn=void 0,t.swicthLinkNode=null,t}t(i,e);var s=i.prototype;return s.init=function(e,t,o,i){this.grassItem=i,this.prop=i.prop,this.isLock=i.locked,this.size=o,this.node.layer=n.Enum.ALL,this.node.setPosition(r(e,t,0));var s=this.addComponent(a);if(this.addComponent(p),s.setContentSize(new c(o,o)),s.setAnchorPoint(d(.5,.5)),i.bg!=C.Blank){var f=this.addComponent(h);f.sizeMode=0,f.spriteFrame=_.resources.get("grass"+Math.floor(4*Math.random()));var u=new l;u.addComponent(g);var m=u.addComponent(a);m.setContentSize(new c(o,o)),m.setAnchorPoint(d(.5,.5)),this.node.addChild(u),this.addTouchEvent(),this.showLock(),this.showProp()}else this.isBlank=!0},s.toggleBorder=function(e,t){if(void 0===t&&(t=!1),!this.isBlank&&!this.isLock){var o=this.node.children[0].getComponent(g);o.clear(),e&&(t?o.strokeColor.fromHEX("#0000ff"):o.strokeColor.fromHEX("#00ff00"),o.lineWidth=4,o.rect(-this.size/2,-this.size/2,this.size,this.size),o.stroke())}},s.removeTouchEvent=function(){this.node.off(f.TOUCH_START),this.node.off(f.TOUCH_MOVE),this.node.off(f.TOUCH_END),this.node.off(f.TOUCH_CANCEL)},s.addTouchEvent=function(){var e=this;if(!this.isLock){var t=null;this.node.on(f.TOUCH_START,(function(i){if(!e.isLock&&null==t){var s=i.target;e.stage.gamePause();for(var n,r=o(e.stage.enemies.concat([e.stage.spriteManager]));!(n=r()).done;){var a=n.value,p=a.node.getWorldPosition(),c=s.getWorldPosition(),d=new u(p.x-a.size/2,p.y-e.stage.spriteManager.size/2,a.size,a.size);if(new u(c.x-a.parentSize/2,c.y-a.parentSize/2,a.parentSize,a.parentSize).intersects(d))return e.stage.gameContinue(),e.stage.warn(),void(t=null)}t=i.target.position.clone(),s.removeFromParent(),e.stage.node.addChild(s),e.toggleBorder(!0,!0)}})),this.node.on(f.TOUCH_MOVE,(function(s){if(!e.isLock&&null!=t){var n=s.target,r=s.getUIStartLocation(),p=s.getUILocation(),c=t.clone();c.x+=p.x-r.x,c.y+=p.y-r.y,n.setPosition(c),c=s.target.getComponent(a).getBoundingBoxToWorld();for(var h=0;h<e.stage.cells.length;h++){var l=e.stage.cells[h],g=l.getComponent(i);if(l!=e.node){if(l.getComponent(a).getBoundingBoxToWorld().contains(d(c.x+c.width/2,c.y+c.height/2))){for(var f,m=!1,v=o(e.stage.enemies.concat([e.stage.spriteManager]));!(f=v()).done;){var C=f.value,z=C.node.getWorldPosition(),_=l.getWorldPosition(),w=new u(z.x-C.size/2,z.y-C.size/2,C.size,C.size);if(new u(_.x-C.parentSize/2,_.y-C.parentSize/2,C.parentSize,C.parentSize).intersects(w)){m=!0;break}}if(!m){g.toggleBorder(!0);continue}}g.toggleBorder(!1)}}}})),this.node.on(f.TOUCH_END,(function(s){if(e.getComponent(p).opacity=255,e.toggleBorder(!1,!0),!e.isLock&&null!=t){var n=s.target.getComponent(a).getBoundingBoxToWorld();e.stage.gameContinue();for(var r=0;r<e.stage.cells.length;r++){var c=e.stage.cells[r],h=c.getComponent(i);if(h.toggleBorder(!1),c!=e.node&&!h.isLock&&!h.isBlank)if(c.getComponent(a).getBoundingBoxToWorld().contains(d(n.x+n.width/2,n.y+n.height/2))){for(var l,g=!1,f=o(e.stage.enemies.concat([e.stage.spriteManager]));!(l=f()).done;){var v=l.value,C=v.node.getWorldPosition(),z=c.getWorldPosition(),_=new u(C.x-v.size/2,C.y-v.size/2,v.size,v.size);if(new u(z.x-v.parentSize/2,z.y-v.parentSize/2,v.parentSize,v.parentSize).intersects(_)){e.stage.warn(),g=!0;break}}if(g)break;var w=c.position.clone();m(c).to(.1,{position:t}).start().removeSelf(),m(s.target).to(.1,{position:w}).start().removeSelf();var S=e.stage.cells.indexOf(s.target);return e.stage.cells[r]=s.target,e.stage.cells[S]=c,void(t=null)}}m(s.target).to(.1,{position:t}).start().removeSelf(),t=null}})),this.node.on(f.TOUCH_CANCEL,(function(o){e.getComponent(p).opacity=255,e.isLock||null==t||m(o.target).to(.1,{position:t}).start().removeSelf()}))}},s.showLock=function(){if(this.isLock){var e=new l("lock"),t=e.addComponent(a);t.addComponent(p).opacity=150;var o=z.Grass_size;t.setContentSize(new c(o,o)),t.setAnchorPoint(.5,.5);var i=e.addComponent(h);i.sizeMode=h.SizeMode.CUSTOM,i.spriteFrame=_.resources.get("lock"),this.node.addChild(e)}},s.showProp=function(){var e=new l("prop"),t=e.addComponent(a),o=z.Sprite_size;t.setAnchorPoint(.5,.5);var i=e.addComponent(h);i.sizeMode=h.SizeMode.CUSTOM,this.prop==C.Stone?i.spriteFrame=_.resources.get("stone"):this.prop==C.Fence_Left_Bottom?(o=this.size-20,i.spriteFrame=_.resources.get("fence")):this.prop==C.Fence_Left_Top?(o=this.size-20,e.setRotationFromEuler(r(180,0,0)),i.spriteFrame=_.resources.get("fence")):this.prop==C.Fence_Right_Top?(o=this.size-20,e.setRotationFromEuler(r(180,180,0)),i.spriteFrame=_.resources.get("fence")):this.prop==C.Fence_Right_Bottom?(o=this.size-20,e.setRotationFromEuler(r(0,180,0)),i.spriteFrame=_.resources.get("fence")):this.prop==C.Radish?i.spriteFrame=_.resources.get("radish"):this.prop==C.Hole_Switch_Off?(i.spriteFrame=_.resources.get("switch_off"),this.isOn=!1):this.prop==C.Hole_Switch_On?(i.spriteFrame=_.resources.get("switch_on"),this.isOn=!0):this.prop==C.Hole_on?(i.spriteFrame=_.resources.get("hole_on"),this.isOn=!0):this.prop==C.Hole_off?(i.spriteFrame=_.resources.get("hole_off"),this.isOn=!1):this.prop==C.Wind&&(i.spriteFrame=_.resources.get("wind"),this.isOn=!1),t.setContentSize(new c(o,o)),this.node.addChild(e)},s.setSwitchLink=function(){if(this.prop==C.Hole_Switch_Off||this.prop==C.Hole_Switch_On){var e=this.grassItem.link_pos;this.swicthLinkNode=this.stage.cells[e]}},s.refreshLinkHole=function(){var e=this.node.getChildByName("prop").getComponent(h);this.isOn?e.spriteFrame=_.resources.get("switch_on"):e.spriteFrame=_.resources.get("switch_off");var t=this.swicthLinkNode.getComponent(i);e=this.swicthLinkNode.getChildByName("prop").getComponent(h),this.isOn?(t.prop=C.Hole_on,e.spriteFrame=_.resources.get("hole_on")):(t.prop=C.Hole_off,e.spriteFrame=_.resources.get("hole_off"))},i}(v))||w);i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./DataItem.ts","./Grassland.ts","./MyGame.ts","./SprteManger.ts","./Stage.ts","./Background.ts","./DialogManger.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MyGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DialogManger.ts"],(function(e){"use strict";var r,t,o,i,n,a,s,c,l;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,s=e.Prefab,c=e.Component},function(e){l=e.DialogManger}],execute:function(){var u,p,f,g,d,h;n._RF.push({},"95be9E8InpKRrI8RK99NLCW","MyGame",void 0);var y=a.ccclass,b=a.property;e("MyGame",(u=y("MyGame"),p=b(s),u(((h=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r=e.call.apply(e,[this].concat(n))||this,o(r,"dialogPrefab",d,i(r)),r}t(r,e);var n=r.prototype;return n.gameOver=function(e){l.create(this.node,this.dialogPrefab).show(!1).onClosed(e)},n.win=function(e){l.create(this.node,this.dialogPrefab).show(!0).onClosed(e)},r}(c)).resources=new Map,d=r((g=h).prototype,"dialogPrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=g))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/SprteManger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataItem.ts","./MyGame.ts","./Grassland.ts"],(function(i){"use strict";var t,s,e,o,n,r,h,a,c,d,p,g,u,f,v;return{setters:[function(i){t=i.inheritsLoose,s=i.createForOfIteratorHelperLoose,e=i.createClass},function(i){o=i.cclegacy,n=i.UITransform,r=i.Size,h=i.Sprite,a=i.v3,c=i.tween,d=i.Component},function(i){p=i.SpriteDirction,g=i.PropType,u=i.Config},function(i){f=i.MyGame},function(i){v=i.Grassland}],execute:function(){o._RF.push({},"d979e9pyTFDeb4O1OHLSdyR","SprteManger",void 0);i("SpriteManager",function(i){function o(){for(var t,s=arguments.length,e=new Array(s),o=0;o<s;o++)e[o]=arguments[o];return(t=i.call.apply(i,[this].concat(e))||this).paused=!0,t.parentSize=void 0,t.size=u.Sprite_size,t.stage=void 0,t.grass=void 0,t.isInvincible=!1,t.isEnemy=void 0,t.spriteDefaultDirection=p.Top,t.deltaTime=void 0,t.direc=void 0,t}t(o,i);var d=o.prototype;return d.addTo=function(i,t,s){void 0===s&&(s=!1),this.stage=i,this.direction=t,this.isEnemy=s,s?i.enemies.push(this):i.spriteManager=this;var e=this.node.addComponent(n);e.setContentSize(new r(this.size,this.size)),e.setAnchorPoint(.5,.5);var o=this.addComponent(h);o.sizeMode=h.SizeMode.CUSTOM,this.isEnemy?o.spriteFrame=f.resources.get("enemy"):o.spriteFrame=f.resources.get("sprite")},d.setPosition=function(i,t,s){if(void 0===s&&(s=!1),null==this.node.parent?this.stage.node.addChild(this.node):this.node.setSiblingIndex(this.stage.node.children.length-1),s)this.node.setPosition(a(i,t,0));else{var e=this.grass.node.position;this.node.setPosition(a(i+e.x,t+e.y,0))}},d.setParent=function(i){if(!this.grass||this.grass.node!=i){this.grass=i.getComponent(v),this.isMoveCenter=!1;var t=i.getComponent(n);this.parentSize=t.contentSize.width,this.node.setSiblingIndex(this.stage.node.children.length-1)}},d.pause=function(){this.paused=!0},d.continue=function(){this.paused=!1},d.isEatByEnemy=function(){for(var i,t=this.getComponent(n).getBoundingBoxToWorld(),e=s(this.stage.enemies);!(i=e()).done;){var o=i.value.getComponent(n).getBoundingBoxToWorld();if(t.intersects(o))return!0}return!1},d.isTouchBorder=function(i){void 0===i&&(i=0);var t=this.node.position,s=t.x,e=t.y;this.direction==p.Top?e+=this.size+i:this.direction==p.Bottom?e-=this.size+i:this.direction==p.Left?s-=this.size+i:this.direction==p.Right&&(s+=this.size+i);var o=this.grass.node.position;return Math.abs(Math.floor(s-o.x))<=2&&Math.abs(Math.floor(e-o.y))<=2},d.isTouchCenter=function(){var i=this.node.position,t=this.grass.node.position;return Math.abs(Math.floor(i.x-t.x))<=2&&Math.abs(Math.floor(i.y-t.y))<=2},d.update=function(i){var t=this;if(!this.paused)if(this.isEnemy||!this.isEatByEnemy()){var s=this.node.position,e=this.grass.node.position,o=100*i,n=this.stage.getGrassNav(this.grass.node);if(this.direction==p.Left)if(this.setPosition(s.x-o,s.y,!0),s=this.node.position,-1!=n[0]){if(s.x<=e.x-this.parentSize/2){var r=this.stage.cells[n[0]];this.setParent(r),this.setPosition(this.parentSize/2+this.stage.grass_spcae,0)}}else s.x-this.size/2<=e.x-this.parentSize/2&&(this.direction=p.Right,this.isMoveCenter=!1);else if(this.direction==p.Top)if(this.setPosition(s.x,s.y+o,!0),s=this.node.position,-1!=n[1]){if(s.y>=e.y+this.parentSize/2){var h=this.stage.cells[n[1]];this.setParent(h),this.setPosition(0,-this.parentSize/2-this.stage.grass_spcae)}}else s.y+this.size/2>=e.y+this.parentSize/2&&(this.direction=p.Bottom,this.isMoveCenter=!1);else if(this.direction==p.Right)if(this.setPosition(s.x+o,s.y,!0),s=this.node.position,-1!=n[2]){if(s.x>=e.x+this.parentSize/2){var d=this.stage.cells[n[2]];this.setParent(d),this.setPosition(-this.parentSize/2-this.stage.grass_spcae,0)}}else s.x+this.size/2>=e.x+this.parentSize/2&&(this.direction=p.Left,this.isMoveCenter=!1);else if(this.direction==p.Bottom)if(this.setPosition(s.x,s.y-o,!0),s=this.node.position,-1!=n[3]){if(s.y<=e.y-this.parentSize/2){var u=this.stage.cells[n[3]];this.setParent(u),this.setPosition(0,this.parentSize/2+this.stage.grass_spcae)}}else s.y-this.size/2<=e.y-this.parentSize/2&&(this.direction=p.Top,this.isMoveCenter=!1);if(!this.isInvincible&&!this.isMoveCenter&&this.grass.prop!=g.Blank)if(this.grass.prop==g.Fence_Left_Bottom)this.direction==p.Left&&this.isTouchBorder()?(this.direction=p.Right,this.isMoveCenter=!0):this.direction==p.Right&&this.isTouchCenter()?(this.direction=p.Bottom,this.isMoveCenter=!0,this.setPosition(0,0)):this.direction==p.Top&&this.isTouchBorder()?(this.direction=p.Left,this.isMoveCenter=!0,this.setPosition(0,0)):this.direction==p.Bottom&&this.isTouchCenter()&&(this.direction=p.Top,this.isMoveCenter=!0);else if(this.grass.prop==g.Fence_Left_Top)this.direction==p.Right&&this.isTouchCenter()?(this.direction=p.Top,this.isMoveCenter=!0,this.setPosition(0,0)):this.direction==p.Left&&this.isTouchBorder()?(this.direction=p.Right,this.isMoveCenter=!0):this.direction==p.Top&&this.isTouchBorder()?(this.direction=p.Bottom,this.isMoveCenter=!0):this.direction==p.Bottom&&this.isTouchCenter()&&(this.direction=p.Left,this.isMoveCenter=!0,this.setPosition(0,0));else if(this.grass.prop==g.Fence_Right_Bottom)this.direction==p.Left&&this.isTouchCenter()?(this.direction=p.Bottom,this.isMoveCenter=!0,this.setPosition(0,0)):this.direction==p.Right&&this.isTouchBorder()?(this.direction=p.Left,this.isMoveCenter=!0):this.direction==p.Top&&this.isTouchCenter()?(this.direction=p.Right,this.isMoveCenter=!0,this.setPosition(0,0)):this.direction==p.Bottom&&this.isTouchBorder()&&(this.direction=p.Top,this.isMoveCenter=!0);else if(this.grass.prop==g.Fence_Right_Top)this.direction==p.Left&&this.isTouchCenter()?(this.direction=p.Top,this.isMoveCenter=!0,this.setPosition(0,0)):this.direction==p.Right&&this.isTouchBorder()?(this.direction=p.Left,this.isMoveCenter=!0):this.direction==p.Top&&this.isTouchBorder()?(this.direction=p.Bottom,this.isMoveCenter=!0):this.direction==p.Bottom&&this.isTouchCenter()&&(this.direction=p.Right,this.isMoveCenter=!0,this.setPosition(0,0));else if(this.grass.prop==g.Wind&&this.isTouchBorder()){this.isMoveCenter=!0;var f=(2*this.parentSize+(Math.abs(e.x-s.x)+Math.abs(e.y-s.y)))*i/o;this.isInvincible=!0,c(this.node).to(.5,{scale:a(1.8,1.8,1)}).delay(f-.5-.3).to(.3,{scale:a(1,1,1)},{onComplete:function(){t.isInvincible=!1}}).start().removeSelf()}else(this.grass.prop==g.Stone||this.isEnemy&&this.grass.prop==g.Radish)&&this.isTouchBorder()?(this.isMoveCenter=!0,this.direction==p.Left?this.direction=p.Right:this.direction==p.Right?this.direction=p.Left:this.direction==p.Top?this.direction=p.Bottom:this.direction==p.Bottom&&(this.direction=p.Top)):this.grass.prop==g.Fire&&this.isTouchBorder()||this.grass.prop==g.Hole_on&&this.isTouchBorder(4)?(this.isMoveCenter=!0,this.stage.gameOver()):this.grass.prop==g.Radish&&this.isTouchBorder(2)?(this.isMoveCenter=!0,this.stage.win()):this.grass.prop!=g.Hole_Switch_On&&this.grass.prop!=g.Hole_Switch_Off||!this.isTouchCenter()||(this.isMoveCenter=!0,this.grass.isOn=!this.grass.isOn,this.grass.refreshLinkHole())}else this.stage.gameOver()},e(o,[{key:"isMoveCenter",get:function(){return this.grass.spriteMoveCentered.get(this.uuid)},set:function(i){this.grass.spriteMoveCentered.set(this.uuid,i)}},{key:"direction",get:function(){return this.direc},set:function(i){var t=a(0,0,0);i==p.Right?t.z=-90:i==p.Top?t.z=0:i==p.Bottom?t.z=180:i==p.Left&&(t.z=90),this.node.setRotationFromEuler(t),this.direc=i}}]),o}(d));o._RF.pop()}}}));

System.register("chunks:///_virtual/Stage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataItem.ts","./MyGame.ts","./Grassland.ts","./SprteManger.ts"],(function(e){"use strict";var t,a,n,s,o,r,i,c,h,l,u,d,v,g,f,p,m;return{setters:[function(e){t=e.inheritsLoose,a=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,s=e._decorator,o=e.UITransform,r=e.resources,i=e.SpriteFrame,c=e.assetManager,h=e.Node,l=e.tween,u=e.v3,d=e.Component},function(e){v=e.PropType,g=e.Config},function(e){f=e.MyGame},function(e){p=e.Grassland},function(e){m=e.SpriteManager}],execute:function(){var S;n._RF.push({},"44196sIBgxPAqiyY5vatggL","Stage",void 0);var M=s.ccclass;s.property,e("Stage",M("Stage")(S=function(e){function n(){for(var t,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).game=void 0,t.cells=void 0,t.data=void 0,t.stageWidth=void 0,t.stageHeight=void 0,t.spriteManager=void 0,t.enemies=[],t.grass_spcae=2,t}t(n,e);var s=n.prototype;return s.start=function(){this.game=this.node.parent.getComponent(f);var e=this.getComponent(o),t=e.contentSize.width,a=e.contentSize.height;this.stageWidth=t,this.stageHeight=a,this.showStage()},s.showStage=function(){var e=this;r.loadDir("./",(function(t,n){for(var s,o=a(n);!(s=o()).done;){var r=s.value;r instanceof i&&f.resources.set(r.name,r)}c.loadBundle("conf",(function(t,a){a.load("out",(function(t,a){e.data=a.json,c.loadBundle("res",(function(){e.createMap()}))}))}))}))},s.createMap=function(){var e=this.data.length,t=this.data[0].length,n=g.Grass_size;this.cells=[],this.enemies=[],this.spriteManager=null;for(var s=t*n/2-n/2,o=e*n/2-n/2,r=0;r<e;r++)for(var i=0;i<t;i++)this.initGrass(this.data[r][i],n,i*n-s,o-r*n);for(var c,h=a(this.cells);!(c=h()).done;){c.value.getComponent(p).setSwitchLink()}},s.initGrass=function(e,t,a,n){t-=this.grass_spcae;var s=new h;this.node.addChild(s);var o=s.addComponent(p);o.stage=this,o.init(a,n,t,e),this.cells.push(s);if(l(s).set({scale:u(0,0,0)}).to(.2,{scale:u(1,1,1)}).start().removeSelf(),e.prop==v.Sprite){var r=new h,i=r.addComponent(m);i.addTo(this,e.direction),i.setParent(s),i.setPosition(0,0),l(r).set({scale:u(0,0,0)}).to(.2,{scale:u(1,1,1)}).delay(.2).start().removeSelf()}else if(e.prop==v.Enemy){var c=new h,d=c.addComponent(m);d.addTo(this,e.direction,!0),d.setParent(s),d.setPosition(0,0),l(c).set({scale:u(0,0,0)}).to(.3,{scale:u(1,1,1)}).delay(.2).start().removeSelf()}},s.getGrassNav=function(e){var t=this.data.length,a=this.data[0].length,n=this.cells.indexOf(e),s=n%a,o=Math.floor(n/a),r=-1;s-1>=0&&this.data[o][s-1].bg!=v.Blank&&(r=n-1);var i=-1;o-1>=0&&this.data[o-1][s].bg!=v.Blank&&(i=n-a);var c=-1;s+1<a&&this.data[o][s+1].bg!=v.Blank&&(c=n+1);var h=-1;return o+1<t&&this.data[o+1][s].bg!=v.Blank&&(h=n+a),[r,i,c,h]},s.warn=function(){},s.gameOver=function(){var e=this;this.gamePause();for(var t,n=a(this.cells);!(t=n()).done;){t.value.getComponent(p).removeTouchEvent()}this.game.gameOver((function(){e.restart()}))},s.win=function(){var e=this;this.gamePause();for(var t,n=a(this.cells);!(t=n()).done;){t.value.getComponent(p).removeTouchEvent()}this.game.win((function(){e.restart()}))},s.gameContinue=function(){this.spriteManager.continue();for(var e,t=a(this.enemies);!(e=t()).done;){e.value.continue()}},s.gamePause=function(){this.spriteManager.pause();for(var e,t=a(this.enemies);!(e=t()).done;){e.value.pause()}},s.restart=function(){for(var e,t=a(this.cells);!(e=t()).done;){e.value.removeFromParent()}for(var n,s=a(this.enemies.concat([this.spriteManager]));!(n=s()).done;){n.value.node.removeFromParent()}this.createMap()},n}(d))||S);n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});